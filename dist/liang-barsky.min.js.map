{"version":3,"file":"liang-barsky.min.js","sources":["../src/index.js"],"sourcesContent":["/**\n * @preserve\n * Fast, destructive implemetation of Liang-Barsky line clipping algorithm.\n * It clips a 2D segment by a rectangle.\n * @author Alexander Milevski <info@w8r.name>\n * @license MIT\n */\n\nconst EPSILON = 1e-6;\nconst { abs } = Math;\nconst INSIDE  = 1;\nconst OUTSIDE = 0;\n\n\nfunction clipT(num, denom, c) {\n  var [tE, tL] = c;\n  if (abs(denom) < EPSILON) return num < 0;\n  var t = num / denom;\n\n  if (denom > 0) {\n    if (t > tL) return 0;\n    if (t > tE) c[0] = t;\n  } else {\n    if (t < tE) return 0;\n    if (t < tL) c[1] = t;\n  }\n  return 1;\n}\n\n\n/**\n * @param  {Array<number>} a\n * @param  {Array<number>} b\n * @param  {Array<number>} box [xmin, ymin, xmax, ymax]\n * @param  {Array<number>} [da]\n * @param  {Array<number>} [db]\n * @return {number}\n */\nexport default function clip(a, b, box, da, db) {\n  var [x1, y1] = a;\n  var [x2, y2] = b;\n  var dx = x2 - x1;\n  var dy = y2 - y1;\n\n  if (arguments.length === 3) {\n    da = a;\n    db = b;\n  } else {\n    da[0] = a[0];\n    da[1] = a[1];\n    db[0] = b[0];\n    db[1] = b[1];\n  }\n\n  if (abs(dx) < EPSILON && abs(dy) < EPSILON &&\n      x1 >= box[0] && x1 <= box[2] &&\n      y1 >= box[1] && y1 <= box[3]) {\n    return INSIDE;\n  }\n\n  var c = [0, 1];\n  if (clipT(box[0] - x1,  dx, c) &&\n      clipT(x1 - box[2], -dx, c) &&\n      clipT(box[1] - y1,  dy, c) &&\n      clipT(y1 - box[3], -dy, c)) {\n    var [tE, tL] = c;\n    if (tL < 1) {\n      db[0] = (x1 + tL * dx);\n      db[1] = (y1 + tL * dy);\n    }\n    if (tE > 0) {\n      da[0] += tE * dx;\n      da[1] += tE * dy;\n    }\n    return INSIDE;\n  }\n  return OUTSIDE;\n}\n"],"names":["clipT","num","denom","c","tE","tL","EPSILON","abs","t","clip","a","b","box","da","db","x1","y1","dx","dy","arguments","length","INSIDE","OUTSIDE"],"mappings":";;;;;;;;yKAcAA,QAASA,EAAK,CAACC,CAAD,CAAMC,CAAN,CAAaC,CAAb,CAAgB,CAC5B,IAAKC,MAAL,CAASC,MACT,IARcC,OAQd,CAAIC,CAAA,CAAIL,CAAJ,CAAJ,CAA0B,MAAa,EAAb,CAAOD,CACzBA,EAAJO,EAAUN,CAEd,IAAY,CAAZ,CAAIA,CAAJ,CAAe,CACb,GAAIM,CAAJ,CAAQH,CAAR,CAAY,MAAO,EACfG,EAAJ,CAAQJ,CAAR,GAAYD,CAAA,CAAE,CAAF,CAAZ,CAAmBK,CAAnB,CAFa,CAAf,IAGO,CACL,GAAIA,CAAJ,CAAQJ,CAAR,CAAY,MAAO,EACfI,EAAJ,CAAQH,CAAR,GAAYF,CAAA,CAAE,CAAF,CAAZ,CAAmBK,CAAnB,CAFK,CAIP,MAAO,EAZqB,CAL9B,IAAQD,iBA6BRE,SAA4B,CAACC,CAAD,CAAIC,CAAJ,CAAOC,CAAP,CAAYC,CAAZ,CAAgBC,CAAhB,CAAoB,CAC9C,IAAKC,MAAL,CAASC,MAAT,CAEIC,MAAAA,CAAUF,CAFd,CAGIG,MAAAA,CAAUF,CAEW,EAAzB,GAAIG,SAAAC,OAAJ,EACEP,CACA,CADKH,CACL,CAAAI,CAAA,CAAKH,CAFP,GAIEE,CAAA,CAAG,CAAH,CAGA,CAHQH,CAAA,CAAE,CAAF,CAGR,CAFAG,CAAA,CAAG,CAAH,CAEA,CAFQH,CAAA,CAAE,CAAF,CAER,CADAI,CAAA,CAAG,CAAH,CACA,CADQH,CAAA,CAAE,CAAF,CACR,CAAAG,CAAA,CAAG,CAAH,CAAA,CAAQH,CAAA,CAAE,CAAF,CAPV,CAUA,IA9CcL,OA8Cd,CAAIC,CAAA,CAAIU,CAAJ,CAAJ,EA9CcX,OA8Cd,CAAyBC,CAAA,CAAIW,CAAJ,CAAzB;AACIH,CADJ,EACUH,CAAA,CAAI,CAAJ,CADV,EACoBG,CADpB,EAC0BH,CAAA,CAAI,CAAJ,CAD1B,EAEII,CAFJ,EAEUJ,CAAA,CAAI,CAAJ,CAFV,EAEoBI,CAFpB,EAE0BJ,CAAA,CAAI,CAAJ,CAF1B,CAGE,MA/CYS,EAkDd,KAAIlB,EAAI,CAAC,CAAD,CAAI,CAAJ,CACR,IAAIH,CAAA,CAAMY,CAAA,CAAI,CAAJ,CAAN,CAAeG,CAAf,CAAoBE,CAApB,CAAwBd,CAAxB,CAAJ,EACIH,CAAA,CAAMe,CAAN,CAAWH,CAAA,CAAI,CAAJ,CAAX,CAAmB,CAACK,CAApB,CAAwBd,CAAxB,CADJ,EAEIH,CAAA,CAAMY,CAAA,CAAI,CAAJ,CAAN,CAAeI,CAAf,CAAoBE,CAApB,CAAwBf,CAAxB,CAFJ,EAGIH,CAAA,CAAMgB,CAAN,CAAWJ,CAAA,CAAI,CAAJ,CAAX,CAAmB,CAACM,CAApB,CAAwBf,CAAxB,CAHJ,CAGgC,CAC9B,IAAKC,MAAL,CAASC,MACA,EAAT,CAAIA,CAAJ,GACES,CAAA,CAAG,CAAH,CACA,CADSC,CACT,CADcV,CACd,CADmBY,CACnB,CAAAH,CAAA,CAAG,CAAH,CAAA,CAASE,CAAT,CAAcX,CAAd,CAAmBa,CAFrB,CAIS,EAAT,CAAId,CAAJ,GACES,CAAA,CAAG,CAAH,CACA,EADST,CACT,CADca,CACd,CAAAJ,CAAA,CAAG,CAAH,CAAA,EAAST,CAAT,CAAcc,CAFhB,CAIA,OAhEYG,EAsDkB,CAYhC,MAjEcC,EA2BgC;"}